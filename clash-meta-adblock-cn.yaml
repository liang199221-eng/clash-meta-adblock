# =========================
# Clash Meta 安卓 · 纯广告过滤规则
# 用途：仅过滤广告 / 所有流量直连 / 无代理节点
# =========================

mixed-port: 7890
allow-lan: false
mode: rule
log-level: warning

# 修正部分：添加一个具体的 Shadowsocks 假节点来满足格式要求
proxies:
  - name: "仅拦截广告-不具备翻墙功能"
    type: ss
    server: 127.0.0.1
    port: 8388
    cipher: aes-128-gcm
    password: "password"

# 策略组：让所有非广告流量强制走直连
proxy-groups:
  - name: "流量出口"
    type: select
    proxies:
      - DIRECT
      - "仅拦截广告-不具备翻墙功能"

# DNS 配置
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  default-nameserver:
    - 223.5.5.5
  nameserver:
    - https://dns.alidns.com/dns-query

# 广告规则集
rule-providers:
  ads_core:
    type: http
    behavior: domain
    url: https://mirror.ghproxy.com/https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-clash.yaml
    path: ./ruleset/ads_core.yaml
    interval: 86400

# 规则逻辑
rules:
  # 1. 拦截广告集
  - RULE-SET,ads_core,REJECT
  # 2. 兜底全部直连（不走 VPN）
  - MATCH,DIRECT
